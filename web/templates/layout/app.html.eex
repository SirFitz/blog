<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>


      <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

      <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/codemirror.min.css">

<!-- Include Editor style.
<link href="https://cdnjs.cloudflare.com/ajax/libs/froala-editor/2.6.5/css/froala_editor.pkgd.min.css" rel="stylesheet" type="text/css" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/froala-editor/2.6.5/css/froala_style.min.css" rel="stylesheet" type="text/css" />

<!-- Include external JS libs. --
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/codemirror.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/mode/xml/xml.min.js"></script>

<!-- Include Editor JS files. --
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/froala-editor/2.6.5/js/froala_editor.pkgd.min.js"></script>
-->
<script src="https://cdn.ckeditor.com/4.7.2/standard/ckeditor.js"></script>



    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.1/js/materialize.min.js"></script>

  <!--  <link href="https://netdna.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.css" rel="stylesheet">

        <!-- Compiled and minified CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.1/css/materialize.min.css">
<!--
    <script src="https://netdna.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.7/summernote.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.7/summernote.js"></script>

    <link href="https://cdn.quilljs.com/1.3.1/quill.snow.css" rel="stylesheet">--



    <!-- Include the Quill library --
    <script src="https://cdn.quilljs.com/1.3.1/quill.js"></script>-->

<script>
$(document).ready(function(){
  // the "href" attribute of the modal trigger must specify the modal ID that wants to be triggered
  $('.modal').modal();
});
$(document).ready(function() {
$('select').material_select();
});

</script>
<link rel="stylesheet" type="text/css" href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">


    <!--  <link href="/css/app.css" rel="stylesheet"> -->
    <style>
    .containerz {
      padding-right: 30px;
      padding-left: 30px;
    }

        .fancy-checkbox input[type="checkbox"],
    .fancy-checkbox .checked {
        display: none;
    }

    .fancy-checkbox input[type="checkbox"]:checked ~ .unchecked
    {
        display: inline-block;
    }

    .fancy-checkbox input[type="checkbox"]:checked ~ .checked
    {
        display: none;
    }

    .fancy-checkbox {
        font-size: 1.5em;
        color: #489fdf;
    }


    .notification-badge {
    position: relative;
    right: 5px;
    top: -20px;
    color: #ffffff;
    background-color: #FF4081;
    margin: 0 -.8em;
    border-radius: 50%;
    padding: 4px 5px;
}

small {
    font-size: 15px;
}

    </style>
  </head>


    <div class="">
      <header class="header">
        <nav role="navigation" style="border-radius:5px;" class="teal accent-4 z-depth-4" style="color: black;">
          <a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>

          <div class="nav-wrapper">
          <ul>  <li>  <img class="brand-logo left" src="https://static1.squarespace.com/static/59462ef51b10e3c4c9653db5/t/595ed7dfc534a5e05a557713" style="max-height:50px; position:relative;"/> </li>
                <li> <p  style="font-size: 20px;">Blogify</p> </li>

          </ul>
          <%= if @conn.cookies["bloguser"] do %>
          <ul class="menu right right hide-on-med-and-down">
              <li class"active cyan" ><a href="/posts">Home</a></li>
              <li class"active cyan" ><a href="/users/profile/<%=@conn.cookies["bloguser"]%>">Profile</a></li>
              <li class"active cyan" ><a href="/channels/view">Channels</a></li>

              <li class"active cyan" ><a href="/posts">Posts</a></li>

              <li class"active cyan" ><a href="/posts">More</a></li>

              <li class"active cyan" ><a href="/login">Logout</a></li>
        <!--      <li>
               <a class='notif-button bz' href='#' data-activates='notifications-cont'><i class="material-icons " >notifications </i></a>

                        <ul id="notifications-cont" class="notif-content active" data-constrainwidth="false" >


                    </ul>
              </li>-->
              <li>              <i class="material-icons">search</i>
              </li>
              <li>
              <input style = "color: white";class="form-control" id="eoFreelancerSearchInput" type="search" name="q" placeholder="Search" data-eo-focus="search.focus">
            </li>

            </ul>
           <%end%>
           <%= unless @conn.cookies["bloguser"] do %>

          <ul class="menu right right hide-on-med-and-down">
              <li class"active cyan" ><a href="/posts">Home</a></li>
              <li class"active cyan" ><a href="/posts">About</a></li>
              <li class"active cyan" ><a href="/posts">Help</a></li>

              <li class"active cyan" ><a href="/posts">Posts</a></li>
              <li class"active cyan" ><a href="/login">Login</a></li>
              <li>              <i class="material-icons">search</i>
              </li>
              <li>
              <input style = "color: white";class="form-control" id="eoFreelancerSearchInput" type="search" name="q" placeholder="Search" data-eo-focus="search.focus">
            </li>

            </ul>
            <%end%>
            <ul class="side-nav" id="mobile-demo">
            <li><a href="sass.html">Sass</a></li>
            <li><a href="badges.html">Components</a></li>
            <li><a href="collapsible.html">Javascript</a></li>
            <li><a href="mobile.html">Mobile</a></li>
          </ul>
        </div>
        </nav>
      </header>
      <br/>
      <div class ="container">
      <main role="main">

        <%= if  get_flash(@conn, :error) != nil or get_flash(@conn, :info) !=nil do %>
          <p class="alert alert-danger" role="alert"><%= get_flash(@conn, :error) %></p>
          <p class="alert alert-info" role="alert"><%= get_flash(@conn, :info) %></p>
        <% end %>
        <%= render @view_module, @view_template, assigns %>
      </main>
    </div>
    </div> <!-- /container -->
    <script src="<%= static_path(@conn, "/js/app.js") %>"></script>

    <script>
    $(document).ready(function(){

          function load_unseen_notification(view = '')
          {
            $.ajax({
             url:"/channels/notify",
             method:"GET",
             data:{view:view},
             dataType:"json",
             success:function(data)
             {

              $('.notif-content').html(data.notification);
              if(data.unseen_notification > 0)
              {

                $('.bz').html('<i class="material-icons " >notifications <small class="notification-badge">5</small>  </i>');
                notify();
              }
             }
            });
          }

          load_unseen_notification();


          $(document).on('click', '.bz', function(){
            $('.bz').html('<i class="material-icons " >notifications  </i>');
            });

          setInterval(function(){
              load_unseen_notification();
            }, 1000000);


            function notify(view = '')
            {
              if(window.Notification && Notification.permission !== "denied") {
              	Notification.requestPermission(function(status) {  // status is "granted", if accepted by user
              		var n = new Notification('Blogify', {
              			body: 'New Notifications! Check them now!',
              			icon: '/path/to/icon.png' // optional
              		});
              	});
              }

            }

          });


    </script>

  </body>
</html>
